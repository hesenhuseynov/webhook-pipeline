flowchart LR
  A[External System] -->|HTTP Webhook| B[WebhookGateway.Api]
  B -->|Publish| SB[Service Bus Topic t-webhooks]

  SB --> SA[sub-audit]
  SA --> AP[AuditProcessor Function]
  AP --> COS[Cosmos DB audit events]

  SB --> SU[sub-users]
  SU --> UP[UserProcessor Function]
  UP --> UOUT[User domain processing]

  SB --> SBIL[sub-billing]
  SBIL --> BP[BillingProcessor Function]
  BP -->|Enqueue job| Q[Storage Queue q-billing-jobs]
  Q -->|QueueTrigger| BW[BillingWorker Function]
  BW --> BOUT[Billing processing result]
